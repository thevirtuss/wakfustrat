{% load widget_tweaks %}

{% csrf_token %}
{# Loop all non fields errors and display them #}
{% if form.non_field_errors %}
  <div class="alert alert-danger" role="alert">
    {% for error in form.non_field_errors  %}
      <p>{{ error }}</p>
    {% endfor %}
  </div>
{% endif %}
{# Loop all form fields #}
{% for field in form %}
  {% if not field.is_hidden %}
    <div class="form-group pb-2{% if field.errors %} form-group-invalid{% endif %}">
      {# Label #}
      <label for="{{ field.id_for_label }}">
        {{ field.label }}{% if field.field.required %} *{% endif %}
      </label>
      {# Field with HTML generated by Django #}
      {% render_field field class+="form-control" %}
      {# Help text #}
      {% if field.help_text %}
        <small id="{{ field.id_for_label }}" class="form-text text-muted">
          {{ field.help_text|safe }}
        </small>
      {% endif %}
      {# Errors #}
      {% if field.errors %}
        <small class="form-text-invalid text-danger">
          {% for error in field.errors %}
            {{ error }}
          {% endfor %}
        </small>
      {% endif %}
    </div>
  {% else %}
    {# Hidden field, we just display it as it comde, it's hidden anyway #}
    {{ field }}
  {% endif %}
{% endfor %}